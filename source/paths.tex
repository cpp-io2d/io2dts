%!TEX root = io2d.tex

\rSec0 [paths] {Paths}

\pnum
Paths define geometric objects which can be stroked (Table~\ref{tab:surface.rendering.operations}), filled, masked, and used to define a Clip Area (\ref{clipprops.summary}.

\pnum
Paths are created using a \tcode{path_builder} object, which stores a path group. 

\pnum
Paths provide vector graphics functionality. As such they are particularly useful in situations where an application is intended to run on a variety of platforms whose output devices (\ref{displaysurface.intro}) span a large gamut of sizes, both in terms of measurement units and in terms of a horizontal and vertical pixel count, in that order. For example, a pixel count expressed as 1280x720 means that there are 1280 horizontal pixels per row of pixels and 720 vertical pixels per column of pixels for a total of 921600 pixels.
%
%\pnum
%For output devices, the measurement size of a pixel is determined by the physical size of the output device. Many output devices represent pixels as having the same horizontal and vertical measurement sizes. As such, when they display a rendered image which does not have the same horizontal to vertical pixel ratio as the output device, it 

\pnum
A path may contain degenerate path segments because of special rules, e.g. the \tcode{line_cap} state of a \tcode{surface} object when they are rendered, which are set forth below.

\pnum
A \tcode{path_group} object is an immutable resource wrapper containing a path group (\ref{pathgroup}). A \tcode{path_group} object is created from a \tcode{path_builder} object. It can also be default constructed, in which case the \tcode{path_group} object contains no paths.

\rSec1 [paths.processing] {Processing paths}

\pnum
This section is normative.

\pnum
It describes how to convert a properly formed path group into a \term{processed path group}. The steps required to create a processed path group require the existence of certain state data:

\begin{libiotwodreqtab3}
{path group processing state data}
{tab:paths.processing.statedata}
 \\ \topline
 \lhdr{Data}
 & \chdr{Type}
 & \rhdr{Initial Value}
 \\ \capsep
 \endfirsthead
 \continuedcaption\\
 \hline
 \lhdr{Data}
 & \chdr{Type}
 & \rhdr{Initial Value}
 \\ \capsep
 \endhead
 Transformation Matrix
 & \tcode{matrix_2d}
 & \tcode{matrix_2d::init_identity()}.
 \\
 Origin
 & \tcode{vector_2d}
 & \tcode{vector_2d\{ \}}.
 \\
 Current Point
 & \tcode{optional<vector_2d>}
 & \tcode{optional<vector_2d>\{ \}}.
 \\
\end{libiotwodreqtab3}

\pnum
Certain path instructions and path segments will modify this state data. The state data is used to ensure that the coordinates of all points in the path group's paths are properly transformed to their intended coordinates based on the effects of those path instructions and path segments.

\pnum
\enternote
The coordinates of a processed path group are in whatever units the user desires. This coordinate space is known as the User Coordinate Space (\ref{surface.coordinatespaces}). Path instructions such as \tcode{path_data::change_matrix} and \tcode{path_data::change_origin} affect the interpretation of path items that follow them within the path group. When a rendering and composing operation takes place, the coordinates of points within the processed path group are transformed into coordinates in the Surface Coordinate Space (\ref{surface.coordinatespaces}) using the Surface Properties' (\ref{surface.rendering.commonstate}) Surface Matrix (\ref{surfaceprops.summary}).
\exitnote

\pnum
The source code below demonstrates how to properly convert a path group into a processed path group.

\pnum
The \tcode{process_path_data} function template transforms the path group contained in a \tcode{path_builder} class template object into a processed path group which is returned as a \tcode{vector<path_data::path_data_types>} object. The processed path group only contains \tcode{path_data::abs_move}, \tcode{path_data::abs_line}, \tcode{path_data::abs_cubic_curve}, and \tcode{path_data::close_path} path items.

\pnum
\enternote
If the \underlyingrendandpresenttechs do not support lines or cubic \bezierlocal curves, Bresenham's algorithms and variations and improvements upon them allow computation of appropriate pixel values for these primitives.
\exitnote
\\

\input{path-process-code}

\addtocounter{SectionDepthBase}{1}
\input{abs-cubic-curve}
\input{abs-ellipse}
\input{abs-line}
\input{abs-move}
\input{abs-quadratic-curve}
\input{abs-rectangle}
\input{arc-clockwise}
\input{arc-counterclockwise}
\input{change-matrix}
\input{change-origin}
\input{close-path}
\input{new-path}
\input{rel-cubic-curve}
\input{rel-ellipse}
\input{rel-line}
\input{rel-move}
\input{rel-quadratic-curve}
\input{rel-rectangle}
\input{path}
\input{path-builder}
\addtocounter{SectionDepthBase}{-1}
