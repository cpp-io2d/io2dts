%!TEX root = io2d.tex
\rSec0 [\iotwod.arc] {Class template \tcode{basic_figure_items<GraphicsSurfaces>::arc}}

\rSec1 [\iotwod.arc.intro] {Overview}

\pnum
\indexlibrary{\idxcode{arc}}%
The class \tcode{basic_figure_items<GraphicsSurfaces>::arc} describes a figure item that is a segment.

\pnum
It has a \term{radius} of type \tcode{basic_point_2d<GraphicsSurfaces::graphics_math_type>}, a \term{rotation} of type \tcode{float}, and a \term{start angle} of type \tcode{float}.

\pnum
It forms a portion of the circumference of a circle. The centre of the circle is implied by the start point, the radius and the start angle of the arc.

\pnum
The data are stored in an object of type \tcode{typename GraphicsSurfaces::paths::arc_data_type}. It is accessible using the \tcode{data} member functions.

\rSec1 [\iotwod.arc.synopsis] {Synopsis}
\begin{codeblock}
namespace @\fullnamespace{}@ {
  template <class GraphicsSurfaces>
  class basic_figure_items<GraphicsSurfaces>::arc {
  public:
    using graphics_math_type = typename GraphicsSurfaces::graphics_math_type;
    using data_type =
      typename GraphicsSurfaces::paths::arc_data_type;

    // \ref{\iotwod.arc.ctor}, construct:
    arc();
    arc(const basic_point_2d<graphics_math_type>& rad, float rot, float sang) noexcept;
    arc(const arc& other) = default;
    arc(arc&& other) noexcept = default;

    // assign:
    arc& operator=(const arc& other) = default;
    arc& operator=(arc&& other) noexcept = default;

    // \ref{\iotwod.arc.acc}, accessors:
    const data_type& data() const noexcept;
    data_type& data() noexcept;

    // \ref{\iotwod.arc.mod}, modifiers:
    void radius(const basic_point_2d<graphics_math_type>& rad) noexcept;
    void rotation(float rot) noexcept;
    void start_angle(float radians) noexcept;

    // \ref{\iotwod.arc.obs}, observers:
    basic_point_2d<typename GraphicsSurfaces::graphics_math_type> radius() const noexcept;
    float rotation() const noexcept;
    float start_angle() const noexcept;
    basic_point_2d<graphics_math_type> center(const basic_point_2d< graphics_math_type>& cpt,
      const basic_matrix_2d<graphics_math_type>& m =
        basic_matrix_2d<graphics_math_type>{}) const noexcept;
    basic_point_2d<graphics_math_type> end_pt(const basic_point_2d<graphics_math_type>& cpt,
      const basic_matrix_2d<graphics_math_type>& m =
        basic_matrix_2d<graphics_math_type>{}) const noexcept;
  };

  // \ref{\iotwod.arc.eq}, equality operators:
  template <class GraphicsSurfaces>
  bool operator==(
    const typename basic_figure_items<GraphicsSurfaces>::arc& lhs,
    const typename basic_figure_items<GraphicsSurfaces>::arc& rhs) 
    noexcept;  
  template <class GraphicsSurfaces>
  bool operator!=(
    const typename basic_figure_items<GraphicsSurfaces>::arc& lhs,
    const typename basic_figure_items<GraphicsSurfaces>::arc& rhs) 
    noexcept;  
}
\end{codeblock}

\rSec1 [\iotwod.arc.ctor] {Constructors}%

\indexlibrary{\idxcode{arc}!constructor}%
\begin{itemdecl}
arc() noexcept;
\end{itemdecl}
\begin{itemdescr}
\pnum
\effects Equivalent to: \tcode{arc\{ basic_point_2d(10.0f, 10.0f), pi<float>, pi<float> \};}.
\end{itemdescr}

\indexlibrary{\idxcode{arc}!constructor}%
\begin{itemdecl}
arc(const basic_point_2d<graphics_math_type>& rad,
  float rot, float sang) noexcept;
\end{itemdecl}
\begin{itemdescr}
\pnum
\effects
Constructs an object of type \tcode{arc}.

\pnum
The radius is \tcode{rad}.

\pnum
The rotation is \tcode{rot}.

\pnum
The start angle is \tcode{sang}.
\end{itemdescr}

\rSec1 [\iotwod.arc.acc] {Accessors}%

\indexlibrarymember{data}{arc}%
\begin{itemdecl}
const data_type& data() const noexcept;
data_type& data() noexcept;
\end{itemdecl}
\begin{itemdescr}
\pnum
\returns A reference to the \tcode{arc} object's data object (See: \ref{\iotwod.arc.intro}).
\end{itemdescr}

\rSec1 [\iotwod.arc.mod] {Modifiers}

\indexlibrarymember{radius}{arc}%
\begin{itemdecl}
void radius(const basic_point_2d<typename GraphicsSurfaces::graphics_math_type>& rad) noexcept;
\end{itemdecl}
\begin{itemdescr}
\pnum
\effects The radius is \tcode{rad}.
\end{itemdescr}

\indexlibrarymember{rotation}{arc}%
\begin{itemdecl}
constexpr void rotation(float rot) noexcept;
\end{itemdecl}
\begin{itemdescr}
\pnum
\effects The rotation is \tcode{rot}.
\end{itemdescr}

\indexlibrarymember{start_angle}{arc}%
\begin{itemdecl}
void start_angle(float sang) noexcept;
\end{itemdecl}
\begin{itemdescr}
\pnum
\effects The start angle is \tcode{sang}.
\end{itemdescr}

\rSec1 [\iotwod.arc.obs] {Observers}

\indexlibrarymember{radius}{arc}%
\begin{itemdecl}
basic_point_2d<typename GraphicsSurfaces::graphics_math_type> radius() const noexcept;
\end{itemdecl}
\begin{itemdescr}
\pnum
\returns The radius.
\end{itemdescr}

\indexlibrarymember{rotation}{arc}%
\begin{itemdecl}
float rotation() const noexcept;
\end{itemdecl}
\begin{itemdescr}
\pnum
\returns The rotation.
\end{itemdescr}

\indexlibrarymember{start_angle}{arc}%
\begin{itemdecl}
float start_angle() const noexcept;
\end{itemdecl}
\begin{itemdescr}
\pnum
\returns The start angle.
\end{itemdescr}

\indexlibrarymember{center}{arc}%
\begin{itemdecl}
basic_point_2d<graphics_math_type> center(
  const basic_point_2d<graphics_math_type>& cpt,
  const basic_matrix_2d<graphics_math_type>& m =
    basic_matrix_2d<graphics_math_type>{}) const noexcept;
\end{itemdecl}
\begin{itemdescr}
\pnum
\returns
As-if:
\begin{codeblock}
auto lmtx = m;
lmtx.m20 = 0.0f;
lmtx.m21 = 0.0f;
auto centerOffset = point_for_angle(two_pi<float> - start_angle(), radius());
centerOffset.y = -centerOffset.y;
return cpt - centerOffset * lmtx;
\end{codeblock}
\end{itemdescr}

\indexlibrarymember{start_angle}{arc}%
\begin{itemdecl}
basic_point_2d<graphics_math_type> end_pt(
  const basic_point_2d<graphics_math_type>& cpt,
  const basic_matrix_2d<graphics_math_type>& m =
    basic_matrix_2d<graphics_math_type>{}) const noexcept;
\end{itemdecl}
\begin{itemdescr}
\pnum
\returns
As-if:
\begin{codeblock}
auto lmtx = m;
auto tfrm = matrix_2d::init_rotate(start_angle() + rotation());
lmtx.m20 = 0.0f;
lmtx.m21 = 0.0f;
auto pt = (radius() * tfrm);
pt.y = -pt.y;
return cpt + pt * lmtx;
\end{codeblock}
\end{itemdescr}

\rSec1 [\iotwod.arc.eq] {Equality operators}%

\indexlibrarymember{operator==}{arc}%
\begin{itemdecl}
template <class GraphicsSurfaces>
bool operator==(
  const typename basic_figure_items<GraphicsSurfaces>::arc& lhs,
  const typename basic_figure_items<GraphicsSurfaces>::arc& rhs) 
  noexcept;
\end{itemdecl}
\begin{itemdescr}
\pnum
\returns
\begin{codeblock}
lhs.radius() == rhs.radius() && lhs.rotation() == rhs.rotation() &&
lhs.start_angle() && rhs.start_angle()
\end{codeblock}
\end{itemdescr}

\indexlibrarymember{operator!=}{arc}%
\begin{itemdecl}
template <class GraphicsSurfaces>
bool operator!=(
  const typename basic_figure_items<GraphicsSurfaces>::arc& lhs,
  const typename basic_figure_items<GraphicsSurfaces>::arc& rhs) 
  noexcept;
\end{itemdecl}
\begin{itemdescr}
\pnum
\returns
\begin{codeblock}
lhs.radius() != rhs.radius() || lhs.rotation() != rhs.rotation() ||
lhs.start_angle() != rhs.start_angle()
\end{codeblock}
\end{itemdescr}
