%!TEX root = io2d.tex

\rSec0 [fontresource] {Class \tcode{font_resource}}

\rSec1 [fontresource.synopsis] {\tcode{font_resource} synopsis}

\begin{codeblock}
namespace std { namespace experimental { namespace io2d { inline namespace v1 {
  class font_resource {
  public:
    // \ref{fontresource.cons}, construct/copy/move
    font_resource() = delete;
    font_resource(const font_resource&) noexcept;
    font_resource& operator=(const font_resource&) noexcept;
    font_resource(font_resource&&) noexcept;
    font_resource& operator=(font_resource&&) noexcept;
    explicit font_resource(const font_resource_factory& f);
    font_resource(const font_resource_factory& f, error_code& ec) noexcept;

    // \ref{fontresource.observers}, observers
    string font_family() const;
    string font_family(error_code& ec) const noexcept;
    experimental::io2d::font_slant font_slant() const noexcept;
    experimental::io2d::font_weight font_weight() const noexcept;
    experimental::io2d::font_options font_options() const noexcept;
    matrix_2d font_matrix() const noexcept;
    matrix_2d surface_matrix() const noexcept;
    experimental::io2d::font_extents font_extents() const noexcept;
    experimental::io2d::text_extents text_extents(const string& utf8) const 
      noexcept;
    glyph_run make_glyph_run(const string& utf8, const vector_2d& pos) const;
    glyph_run make_glyph_run(const string& utf8, const vector_2d& pos, 
      error_code& ec) const noexcept;

  private:
    shared_ptr<cairo_scaled_font_t> _Scaled_font;	// \expos
    shared_ptr<string> _Font_family;			// \expos
    experimental::io2d::font_slant _Font_slant;		// \expos
    experimental::io2d::font_weight _Font_weight;	// \expos
    shared_ptr<cairo_font_options_t> _Font_options;	// \expos
  };
} } } }
\end{codeblock}

\rSec1 [fontresource.intro] {\tcode{font_resource} Description}

\pnum
\indexlibrary{\idxcode{font_resource}}
\pnum
The \tcode{font_resource} class defines an immutable font resource that is used in creating \tcode{glyph_run} objects and in the Typesetting rendering and composing operation (\ref{surface.rendering} and \ref{surface.typesetting}).

\rSec1 [fontresource.cons] {\tcode{font_resource} constructors and assignment operators}

\indexlibrary{\idxcode{font_resource}!constructor}
\begin{itemdecl}
explicit font_resource(const font_resource_factory& f);
font_resource(const font_resource_factory& f, error_code& ec) noexcept;
\end{itemdecl}
\begin{itemdescr}
\pnum
\effects
Creates a \tcode{font_resource} object representing a font resource for which the font family, posture, and weight, respectively, shall be the results obtained from the font matching process described in \ref{fontresourcefactory.fontmatching} when the desired font family, desired posture, and desired weight are \tcode{f.font_family()}, \tcode{f.font_slant()}, and \tcode{f.font_weight()}, respectively.

\pnum
The \tcode{font_resource} object shall have \tcode{f.font_options()} as its \tcode{font_options} value.

\pnum
The \tcode{font_resource} object shall have \tcode{f.font_matrix()} as its font matrix.

\pnum
The \tcode{font_resource} object shall have \tcode{f.surface_matrix()} as its surface matrix.

\pnum
\throws
As specified in Error reporting (\ref{\iotwod.err.report}).

\pnum
\errors
\tcode{errc::not_enough_memory} if there was a failure to allocate memory.

\pnum
Other errors, if any, produced by this function are \impldef{font_resource!constructor}.
\end{itemdescr}

\rSec1 [fontresource.observers] {\tcode{font_resource} observers}

\indexlibrary{\idxcode{font_resource}!\idxcode{font_family}}
\indexlibrary{\idxcode{font_family}!\idxcode{font_resource}}
\begin{itemdecl}
string font_family() const;
string font_family(error_code& ec) const noexcept;
\end{itemdecl}
\begin{itemdescr}
\pnum
\returns

\throws
As specified in Error reporting (\ref{\iotwod.err.report}).

\pnum
\errors
\tcode{errc::not_enough_memory} if there was a failure to allocate memory.
\end{itemdescr}

\indexlibrary{\idxcode{font_resource}!\idxcode{font_slant}}
\indexlibrary{\idxcode{font_slant}!\idxcode{font_resource}}
\begin{itemdecl}
experimental::io2d::font_slant font_slant() const noexcept;
\end{itemdecl}
\begin{itemdescr}
\pnum
\returns

\end{itemdescr}

\indexlibrary{\idxcode{font_resource}!\idxcode{font_weight}}
\indexlibrary{\idxcode{font_weight}!\idxcode{font_resource}}
\begin{itemdecl}
experimental::io2d::font_weight font_weight() const noexcept;
\end{itemdecl}
\begin{itemdescr}
\pnum
\returns

\end{itemdescr}

\indexlibrary{\idxcode{font_resource}!\idxcode{font_options}}
\indexlibrary{\idxcode{font_options}!\idxcode{font_resource}}
\begin{itemdecl}
experimental::io2d::font_options font_options() const noexcept;
\end{itemdecl}
\begin{itemdescr}
\pnum
\returns

\end{itemdescr}

\indexlibrary{\idxcode{font_resource}!\idxcode{font_matrix}}
\indexlibrary{\idxcode{font_matrix}!\idxcode{font_resource}}
\begin{itemdecl}
matrix_2d font_matrix() const noexcept;
\end{itemdecl}
\begin{itemdescr}
\pnum
\returns

\end{itemdescr}

\indexlibrary{\idxcode{font_resource}!\idxcode{surface_matrix}}
\indexlibrary{\idxcode{surface_matrix}!\idxcode{font_resource}}
\begin{itemdecl}
matrix_2d surface_matrix() const noexcept;
\end{itemdecl}
\begin{itemdescr}
\pnum
\returns

\end{itemdescr}

\indexlibrary{\idxcode{font_resource}!\idxcode{font_extents}}
\indexlibrary{\idxcode{font_extents}!\idxcode{font_resource}}
\begin{itemdecl}
experimental::io2d::font_extents font_extents() const noexcept;
\end{itemdecl}
\begin{itemdescr}
\pnum
\returns

\end{itemdescr}

\indexlibrary{\idxcode{font_resource}!\idxcode{text_extents}}
\indexlibrary{\idxcode{text_extents}!\idxcode{font_resource}}
\begin{itemdecl}
experimental::io2d::text_extents text_extents(const string& utf8) const 
  noexcept;
\end{itemdecl}
\begin{itemdescr}
\pnum
\returns

\end{itemdescr}

\indexlibrary{\idxcode{font_resource}!\idxcode{make_glyph_run}}
\indexlibrary{\idxcode{make_glyph_run}!\idxcode{font_resource}}
\begin{itemdecl}
glyph_run make_glyph_run(const string& utf8, const vector_2d& pos) const;
glyph_run make_glyph_run(const string& utf8, const vector_2d& pos, 
  error_code& ec) const noexcept;
\end{itemdecl}
\begin{itemdescr}
\pnum
\returns

\pnum
\throws
As specified in Error reporting (\ref{\iotwod.err.report}).

\pnum
\errors
\tcode{errc::not_enough_memory} if there was a failure to allocate memory.

\pnum
Other errors, if any, produced by this function are \impldef{font_resource!make_glyph_run}.

\end{itemdescr}
